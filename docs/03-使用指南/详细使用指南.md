# WP Clean Admin 详细使用指南

## 1. 安装前准备

### 1.1 系统要求
- WordPress 5.0 或更高版本
- PHP 7.0 或更高版本
- MySQL 5.6 或更高版本

### 1.2 安装方式

#### 方式 1：通过 WordPress 后台安装
1. 登录 WordPress 后台
2. 导航到「插件」→「添加新插件」
3. 在搜索框中输入「WP Clean Admin」
4. 点击「现在安装」按钮
5. 安装完成后点击「激活」按钮

#### 方式 2：手动上传安装
1. 从 GitHub 下载 ZIP 压缩包：[https://github.com/sutchan/WPCleanAdmin/archive/main.zip](https://github.com/sutchan/WPCleanAdmin/archive/main.zip)
2. 登录 WordPress 后台
3. 导航到「插件」→「添加新插件」
4. 点击「上传插件」按钮
5. 选择下载的 ZIP 压缩包并点击「现在安装」
6. 安装完成后点击「激活」按钮

#### 方式 3：FTP 上传安装
1. 从 GitHub 下载并解压 ZIP 压缩包
2. 使用 FTP 客户端连接到您的网站
3. 将解压后的 `wpcleanadmin` 文件夹上传到 `/wp-content/plugins/` 目录
4. 登录 WordPress 后台
5. 导航到「插件」→「已安装插件」
6. 找到「WP Clean Admin」并点击「激活」按钮

#### 方式 4：Git 克隆安装
```bash
git clone https://github.com/sutchan/WPCleanAdmin.git wp-content/plugins/wp-clean-admin
```

## 2. 插件设置

### 2.1 访问设置页面
1. 激活插件后，在 WordPress 后台左侧菜单中会出现「WP Clean Admin」选项
2. 点击该选项进入插件设置页面
3. 设置页面分为多个标签页，每个标签页对应一个功能模块
4. 完成设置后点击「保存设置」按钮

### 2.2 设置选项说明
1. **常规设置**：配置插件的基本选项，如语言、日志记录等
2. **后台清理**：设置需要隐藏的菜单、仪表盘小工具等
3. **性能优化**：配置性能优化选项，如禁用不必要的 WordPress 功能
4. **安全设置**：配置安全相关选项，如登录限制、隐藏版本信息等
5. **用户权限**：管理用户角色和权限
6. **菜单定制**：自定义后台菜单的排序和分组
7. **数据库管理**：配置数据库清理和优化选项

## 3. 功能模块详细说明

### 3.1 常规设置

#### 3.1.1 基本设置
- **启用插件**：开启或关闭插件功能
- **插件语言**：选择插件的显示语言
- **启用日志记录**：开启或关闭插件的日志记录功能

#### 3.1.2 高级设置
- **启用调试模式**：开启或关闭调试模式
- **显示管理通知**：控制是否显示插件的管理通知
- **启用自动更新**：控制是否启用插件的自动更新

### 3.2 后台清理

#### 3.2.1 菜单清理
- **隐藏管理菜单**：选择需要隐藏的 WordPress 管理菜单
- **隐藏子菜单**：选择需要隐藏的子菜单
- **自定义菜单标题**：修改菜单的显示标题

#### 3.2.2 仪表盘清理
- **隐藏仪表盘小工具**：选择需要隐藏的仪表盘小工具
- **隐藏仪表盘欢迎信息**：隐藏仪表盘的欢迎信息
- **自定义仪表盘**：自定义仪表盘的布局和内容

#### 3.2.3 后台信息清理
- **隐藏 WordPress 版本信息**：隐藏后台显示的 WordPress 版本信息
- **隐藏更新通知**：隐藏后台的更新通知
- **自定义后台样式**：自定义后台的 CSS 样式

#### 3.2.4 登录页面优化
- **自定义登录页面 Logo**：上传自定义的登录页面 Logo
- **自定义登录页面背景**：设置登录页面的背景图片或颜色
- **隐藏 WordPress 登录页链接**：隐藏登录页面的 WordPress 链接
- **自定义登录页面文本**：修改登录页面的文本内容

### 3.3 性能优化

#### 3.3.1 功能禁用
- **禁用 XML-RPC**：禁用 XML-RPC 功能，提高安全性
- **禁用 REST API**：禁用或限制 REST API 访问
- **禁用 Emoji 支持**：禁用 WordPress 的 Emoji 支持
- **禁用修订版本**：限制或禁用文章修订版本
- **禁用自动保存**：调整或禁用自动保存功能
- **禁用 pingbacks/trackbacks**：禁用 pingbacks 和 trackbacks

#### 3.3.2 资源优化
- **合并 CSS 文件**：合并多个 CSS 文件，减少 HTTP 请求
- **合并 JavaScript 文件**：合并多个 JavaScript 文件
- **压缩 CSS**：压缩 CSS 文件大小
- **压缩 JavaScript**：压缩 JavaScript 文件大小
- **延迟加载 JavaScript**：延迟加载非关键 JavaScript
- **优化图片加载**：优化图片的加载方式

#### 3.3.3 数据库优化
- **自动优化数据库**：定期自动优化数据库
- **优化数据库表**：优化数据库表结构
- **修复数据库**：修复损坏的数据库表

### 3.4 安全设置

#### 3.4.1 登录安全
- **限制登录尝试次数**：设置允许的登录尝试次数，防止暴力破解
- **登录失败通知**：登录失败时发送通知
- **隐藏登录错误信息**：隐藏详细的登录错误信息
- **启用两步验证**：启用两步验证功能

#### 3.4.2 安全增强
- **隐藏 WordPress 版本信息**：隐藏网站的 WordPress 版本信息
- **禁用文件编辑**：禁用 WordPress 后台的文件编辑功能
- **禁用主题编辑器**：禁用 WordPress 后台的主题编辑器

#### 3.4.3 安全头部
- **启用 X-Frame-Options**：防止点击劫持攻击
- **启用 X-XSS-Protection**：防止 XSS 攻击
- **启用 X-Content-Type-Options**：防止 MIME 类型嗅探
- **启用 Strict-Transport-Security**：强制使用 HTTPS
- **启用 Content-Security-Policy**：限制资源加载来源

### 3.5 用户权限

#### 3.5.1 角色管理
- **创建新角色**：创建自定义用户角色
- **编辑现有角色**：修改现有角色的权限
- **删除角色**：删除不需要的角色

#### 3.5.2 权限分配
- **分配角色权限**：为每个角色分配具体权限
- **自定义权限**：创建自定义权限
- **权限组管理**：管理权限组

#### 3.5.3 访问控制
- **限制 IP 访问**：限制特定 IP 地址访问后台
- **限制登录时间**：限制登录的时间段
- **禁用 XML-RPC 访问**：禁用 XML-RPC 访问

### 3.6 菜单定制

#### 3.6.1 菜单排序
- **自定义菜单顺序**：调整后台菜单的显示顺序
- **菜单分组**：创建自定义菜单组
- **菜单图标**：自定义菜单图标

#### 3.6.2 菜单权限
- **按角色显示菜单**：根据用户角色显示或隐藏菜单
- **按用户显示菜单**：根据用户显示或隐藏菜单
- **自定义菜单权限**：为菜单设置自定义权限

#### 3.6.3 菜单外观
- **菜单样式**：自定义菜单的样式
- **菜单提示**：为菜单添加提示信息
- **隐藏菜单计数**：隐藏菜单的计数显示

### 3.7 数据库管理

#### 3.7.1 数据库清理
- **清理文章修订**：删除旧的文章修订版本
- **清理自动草稿**：删除自动保存的草稿
- **清理垃圾桶**：清空垃圾桶中的内容
- **清理过期的评论**：删除过期的评论
- **清理 transient 数据**：删除过期的 transient 数据
- **清理未使用的术语**：删除未使用的分类和标签

#### 3.7.2 数据库优化
- **优化数据库表**：优化数据库表结构
- **修复数据库表**：修复损坏的数据库表
- **分析数据库表**：分析数据库表的使用情况
- **修复数据库**：修复数据库中的错误

#### 3.7.3 数据库备份
- **手动备份数据库**：手动备份数据库
- **自动备份数据库**：设置定期自动备份数据库
- **备份管理**：管理数据库备份文件
- **恢复数据库**：从备份中恢复数据库

## 4. 功能使用示例

### 4.1 后台清理示例

#### 4.1.1 隐藏管理菜单
1. 进入 WP Clean Admin 设置页面
2. 点击「后台清理」标签页
3. 选择「菜单清理」选项
4. 勾选需要隐藏的菜单
5. 点击「保存设置」按钮

#### 4.1.2 自定义仪表盘
1. 进入 WP Clean Admin 设置页面
2. 点击「后台清理」标签页
3. 选择「仪表盘清理」选项
4. 勾选需要隐藏的仪表盘小工具
5. 点击「保存设置」按钮

#### 4.1.3 自定义登录页面
1. 进入 WP Clean Admin 设置页面
2. 点击「后台清理」标签页
3. 选择「登录页面优化」选项
4. 上传自定义 Logo（建议尺寸：200x80px）
5. 设置登录页面背景
6. 点击「保存设置」按钮
7. 访问登录页面查看效果

### 4.2 性能优化示例

#### 4.2.1 禁用不必要的功能
1. 进入 WP Clean Admin 设置页面
2. 点击「性能优化」标签页
3. 选择「功能禁用」选项
4. 勾选需要禁用的功能（如 Emoji 支持）
5. 点击「保存设置」按钮
6. 使用性能测试工具检查优化效果

#### 4.2.2 优化资源加载
1. 进入 WP Clean Admin 设置页面
2. 点击「性能优化」标签页
3. 选择「资源优化」选项
4. 勾选「合并 CSS 文件」和「合并 JavaScript 文件」
5. 点击「保存设置」按钮
6. 使用 Google PageSpeed Insights 检查优化效果

#### 4.2.3 优化数据库
1. 进入 WP Clean Admin 设置页面
2. 点击「性能优化」标签页
3. 选择「数据库优化」选项
4. 点击「优化数据库」按钮
5. 等待优化完成

### 4.3 安全设置示例

#### 4.3.1 限制登录尝试次数
1. 进入 WP Clean Admin 设置页面
2. 点击「安全设置」标签页
3. 选择「登录安全」选项
4. 设置「允许的登录尝试次数」为 5
5. 设置「锁定时间」为 30 分钟
6. 勾选「启用登录失败通知」
7. 点击「保存设置」按钮

#### 4.3.2 隐藏 WordPress 版本信息
1. 进入 WP Clean Admin 设置页面
2. 点击「安全设置」标签页
3. 选择「安全增强」选项
4. 勾选「隐藏 WordPress 版本信息」
5. 点击「保存设置」按钮

### 4.4 用户权限管理示例

#### 4.4.1 创建自定义角色
1. 进入 WP Clean Admin 设置页面
2. 点击「用户权限」标签页
3. 选择「角色管理」选项
4. 点击「创建新角色」按钮
5. 输入角色名称和描述
6. 选择角色权限
7. 点击「保存角色」按钮

#### 4.4.2 分配用户权限
1. 进入 WP Clean Admin 设置页面
2. 点击「用户权限」标签页
3. 选择「权限分配」选项
4. 选择用户角色
5. 勾选需要分配的权限
6. 点击「保存权限」按钮

### 4.5 菜单定制示例

#### 4.5.1 自定义菜单顺序
1. 进入 WP Clean Admin 设置页面
2. 点击「菜单定制」标签页
3. 选择「菜单排序」选项
4. 拖动菜单调整顺序
5. 点击「保存设置」按钮
6. 刷新后台查看效果

#### 4.5.2 创建菜单组
1. 进入 WP Clean Admin 设置页面
2. 点击「菜单定制」标签页
3. 选择「菜单分组」选项
4. 点击「创建新菜单组」按钮
5. 输入菜单组名称
6. 选择要包含的菜单
7. 点击「保存菜单组」按钮

### 4.6 数据库管理示例

#### 4.6.1 清理数据库
1. 进入 WP Clean Admin 设置页面
2. 点击「数据库管理」标签页
3. 选择「数据库清理」选项
4. 勾选需要清理的项目
5. 点击「开始清理」按钮
6. 等待清理完成

#### 4.6.2 优化数据库
1. 进入 WP Clean Admin 设置页面
2. 点击「数据库管理」标签页
3. 选择「数据库优化」选项
4. 点击「优化数据库」按钮
5. 等待优化完成

#### 4.6.3 备份数据库
1. 进入 WP Clean Admin 设置页面
2. 点击「数据库管理」标签页
3. 选择「数据库备份」选项
4. 选择备份类型（完整备份/部分备份）
5. 点击「开始备份」按钮
6. 等待备份完成
7. 下载备份文件到本地

## 5. 常见问题解答

### 5.1 安装问题

#### Q: 插件安装失败怎么办？
A: 请检查以下几点：
- 确保您的 WordPress 版本符合要求（5.0+）
- 确保您的 PHP 版本符合要求（7.0+）
- 检查文件权限是否正确
- 尝试手动上传安装

#### Q: 插件激活后导致网站崩溃怎么办？
A: 请按照以下步骤恢复：
1. 使用 FTP 客户端连接到您的网站
2. 进入 `/wp-content/plugins/` 目录
3. 将 `wpcleanadmin` 文件夹重命名为 `wpcleanadmin-deactivated`
4. 刷新网站，此时插件已被禁用
5. 检查错误日志，找出问题原因
6. 修复问题后，将文件夹重命名回 `wpcleanadmin`

### 5.2 功能问题

#### Q: 隐藏的菜单如何恢复？
A: 进入 WP Clean Admin 设置页面，在「后台清理」标签页中取消勾选对应的菜单，然后点击「保存设置」按钮。

#### Q: 插件设置不生效怎么办？
A: 请尝试以下解决方法：
1. 清除浏览器缓存
2. 检查是否有其他插件冲突
3. 尝试恢复默认设置
4. 检查 WordPress 错误日志

#### Q: 插件影响网站性能怎么办？
A: 插件设计的目的是优化网站性能，如果出现性能问题，可能是由于配置不当导致的。请检查以下几点：
- 确保只启用需要的功能
- 检查是否有冲突的插件
- 调整插件设置，减少资源消耗

### 5.3 兼容性问题

#### Q: 插件与其他插件冲突怎么办？
A: 请按照以下步骤排查：
1. 禁用其他所有插件，只启用 WP Clean Admin
2. 检查问题是否解决
3. 逐个启用其他插件，找出冲突的插件
4. 联系插件开发者寻求解决方案

#### Q: 插件与主题冲突怎么办？
A: 请按照以下步骤排查：
1. 切换到默认主题（如 Twenty Twenty-One）
2. 检查问题是否解决
3. 如果问题解决，说明与当前主题冲突
4. 联系主题开发者寻求解决方案

### 5.4 安全问题

#### Q: 插件是否安全？
A: WP Clean Admin 遵循 WordPress 安全最佳实践，定期更新以修复安全问题。但请确保您始终使用最新版本的插件。

#### Q: 数据库备份失败怎么办？
A: 请检查以下几点：
- 确保数据库用户有足够的权限
- 检查服务器磁盘空间是否充足
- 尝试使用其他备份方式
- 检查 WordPress 错误日志

## 6. 最佳实践

### 6.1 使用建议

#### 6.1.1 初始设置
- 隐藏不必要的管理菜单
- 禁用 Emoji 和 XML-RPC 功能
- 限制登录尝试次数
- 隐藏 WordPress 版本信息

#### 6.1.2 性能优化建议
- 合并 CSS 和 JavaScript 文件
- 启用图片延迟加载
- 定期优化数据库
- 禁用不必要的 WordPress 功能

#### 6.1.3 安全建议
- 启用登录限制
- 限制 IP 访问后台
- 禁用文件编辑功能
- 定期备份数据库

### 6.2 维护建议

1. 定期检查插件更新
2. 定期备份数据库
3. 定期清理数据库
4. 检查网站性能
5. 监控安全日志
6. 定期审查用户权限

### 6.3 支持渠道

如果您在使用过程中遇到问题，可以通过以下渠道寻求支持：
- GitHub Issues：https://github.com/sutchan/WPCleanAdmin/issues
- GitHub Discussions：https://github.com/sutchan/WPCleanAdmin/discussions

## 7. 高级功能

### 7.1 插件 API

WP Clean Admin 提供了一系列 API，允许其他插件或主题扩展其功能。

```php
// 隐藏指定菜单
wpca_hide_menu( 'edit-comments.php' );

// 禁用指定功能
wpca_disable_feature( 'emoji' );

// 设置菜单顺序
wpca_set_menu_order( array( 'index.php', 'edit.php', 'upload.php' ) );
```

### 7.2 钩子和过滤器

插件提供了多个钩子和过滤器，允许您自定义插件的行为。

```php
// 保存设置后触发的钩子
do_action( 'wpca_after_save_settings', $settings );

// 自定义隐藏菜单的过滤器
add_filter( 'wpca_hidden_menus', 'custom_hidden_menus' );
function custom_hidden_menus( $menus ) {
    $menus[] = 'tools.php';
    return $menus;
}
```

### 7.3 自定义模块开发

如果您需要扩展插件功能，可以开发自定义模块：
1. 创建模块文件
2. 继承 `WPCleanAdmin\Module` 类
3. 实现模块的初始化方法
4. 注册模块
5. 激活模块

## 8. 升级和迁移

### 8.1 插件升级
- 插件支持 WordPress 自动升级
- 您也可以手动下载最新版本进行升级
- 升级前建议备份网站数据

### 8.2 数据迁移
1. 从 GitHub 下载最新版本的插件
2. 登录 WordPress 后台
3. 进入「插件」→「已安装插件」
4. 停用并删除旧版本的插件
5. 上传并激活新版本的插件
6. 检查设置是否正确

### 8.3 降级处理
- 如果新版本出现问题，可以降级到旧版本
- 下载旧版本的插件
- 停用并删除当前版本
- 上传并激活旧版本
- 恢复之前的设置

## 9. 卸载插件

### 9.1 常规卸载
1. 进入 WordPress 后台的「插件」页面
2. 找到 WP Clean Admin 插件
3. 点击「停用」按钮
4. 点击「删除」按钮
5. 确认删除

### 9.2 完全卸载
1. 按照常规卸载步骤删除插件
2. 使用 FTP 客户端删除 `/wp-content/uploads/wpca/` 目录
3. 在数据库中删除所有以 `wpca_` 开头的选项

## 10. 总结

WP Clean Admin 是一个功能全面的 WordPress 后台清理和优化插件，旨在提高管理员的工作效率和网站性能。通过合理配置插件，您可以：

- 简化 WordPress 后台，隐藏不必要的功能
- 优化网站性能，提高加载速度
- 增强网站安全性，保护网站免受攻击
- 自定义后台界面，提高工作效率
- 管理用户权限，增强团队协作

插件提供了丰富的设置选项，允许您根据自己的需求进行定制。同时，插件还提供了 API 和钩子，允许开发者扩展其功能。

建议您定期更新插件，以获取最新的功能和安全修复。如果您在使用过程中遇到问题，可以通过 GitHub Issues 或 Discussions 寻求支持。