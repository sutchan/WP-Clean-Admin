# WP Clean Admin 贡献指南\r\n\r\n欢迎您参与 WP Clean Admin 插件的开发和维护！本指南将帮助您了解如何为项目做出贡献。\r\n\r\n## 1. 贡献类型\r\n\r\n您可以通过以下方式为 WP Clean Admin 做出贡献：\r\n- **报告 Bug**：发现并报告插件中的问题\r\n- **提出新功能**：提出您认为有用的新功能或改进\r\n- **修复 Bug**：修复已报告的问题\r\n- **编写代码**：实现新功能或改进现有功能\r\n- **改进文档**：完善插件文档和使用指南\r\n\r\n## 2. 贡献流程\r\n\r\n### 2.1 准备开发环境\r\n\r\n1. **注册 GitHub 账号**\r\n2. **Fork 仓库**：访问 [https://github.com/sutchan/WPCleanAdmin](https://github.com/sutchan/WPCleanAdmin) 并点击 "Fork" 按钮\r\n3. **克隆仓库**：将您的 fork 克隆到本地\r\n   ```bash\r\n   git clone https://github.com/your-username/WPCleanAdmin.git\r\n   cd WPCleanAdmin\r\n   ```\r\n4. **添加上游仓库**：将原始仓库添加为上游仓库\r\n   ```bash\r\n   git remote add upstream https://github.com/sutchan/WPCleanAdmin.git\r\n   ```\r\n5. **配置 Git**：设置您的用户名和邮箱\r\n\r\n### 2.2 开发流程\r\n\r\n1. **创建分支**：从 `develop` 分支创建新分支，用于开发新功能或修复 Bug\r\n   ```bash\r\n   git checkout develop\r\n   git pull upstream develop\r\n   git checkout -b feature/your-feature-name\r\n   # 或用于修复 Bug\r\n   git checkout -b bugfix/your-bugfix-name\r\n   ```\r\n2. **编写代码**：实现您的功能或修复\r\n3. **测试代码**：确保您的代码能够正常工作\r\n4. **提交代码**：提交您的更改\r\n5. **推送分支**：将您的分支推送到 GitHub\r\n   ```bash\r\n   git push origin feature/your-feature-name\r\n   ```\r\n6. **创建 Pull Request**：在 GitHub 上创建 Pull Request，将您的分支合并到 `develop` 分支\r\n\r\n### 2.3 Pull Request 要求\r\n\r\n1. **清晰的标题**：Pull Request 标题应简洁明了，描述您的更改\r\n2. **详细的描述**：在描述中详细说明您的更改内容和原因\r\n3. **关联 Issue**：如果您的更改与某个 Issue 相关，请在描述中关联该 Issue\r\n4. **通过测试**：确保您的代码通过所有测试\r\n5. **遵循规范**：确保您的代码符合项目的代码规范\r\n\r\n## 3. 代码规范\r\n\r\n请确保您的代码遵循以下规范：\r\n\r\n### 3.1 基础规范\r\n\r\n- **编码格式**：所有文件必须使用 UTF-8 编码，无 BOM\r\n- **换行符**：统一使用 Unix LF 换行符\r\n- **缩进**：使用 4 个空格作为缩进，禁止使用制表符\r\n- **行宽**：每行代码长度建议不超过 120 个字符\r\n- **文件名**：使用小写字母和连字符，例如 `class-wpca-core.php`\r\n\r\n### 3.2 命名规范\r\n\r\n- **类名**：使用 PascalCase，例如 `WPCleanAdmin\Core`\r\n- **方法名**：使用 camelCase，例如 `getInstance()`\r\n- **函数名**：使用 snake_case，例如 `wpca_get_settings()`\r\n- **变量名**：使用 snake_case，例如 `$plugin_settings`\r\n- **常量名**：使用全大写字母和下划线，例如 `WPCA_VERSION`\r\n- **钩子名**：使用 snake_case，例如 `wpca_after_save_settings`\r\n\r\n### 3.3 代码风格\r\n\r\n- **注释**：为所有公共函数和类添加注释\r\n- **文档块**：使用 PHPDoc 为类和函数添加文档块\r\n- **代码结构**：保持清晰的代码结构，使用适当的空格和换行\r\n\r\n### 3.4 安全规范\r\n\r\n请遵循 [安全开发实践指南](安全开发实践指南.md) 中的安全规范。\r\n\r\n## 4. 提交规范\r\n\r\n### 4.1 提交信息格式\r\n\r\n提交信息应包含以下部分：\r\n\r\n```\r\n类型: 简短描述\r\n\r\n详细描述\r\n\r\n关联 #issue-number\r\n```\r\n\r\n### 4.2 提交类型\r\n\r\n- **feat**：新功能\r\n- **fix**：修复 Bug\r\n- **docs**：文档更改\r\n- **style**：代码风格更改（不影响功能）\r\n- **refactor**：代码重构（不添加功能或修复 Bug）\r\n- **test**：测试相关更改\r\n- **chore**：构建或辅助工具更改\r\n\r\n### 4.3 提交示例\r\n\r\n```\r\nfeat: 添加菜单定制功能\r\n\r\n- 实现了菜单拖拽排序功能\r\n- 添加了菜单组创建功能\r\n- 支持按角色显示菜单\r\n\r\n关联 #123\r\n```\r\n\r\n```\r\nfix: 修复数据库优化功能的错误\r\n\r\n- 修复了 SQL 查询错误\r\n- 改进了错误处理\r\n\r\n关联 #456\r\n```\r\n\r\n## 5. 分支管理\r\n\r\n### 5.1 主要分支\r\n\r\n- **main**：主分支，用于发布稳定版本\r\n  - 仅包含经过测试的稳定代码\r\n  - 每次发布新版本时从 develop 分支合并\r\n  - 不直接接受 Pull Request\r\n\r\n- **develop**：开发分支，用于集成新功能\r\n  - 包含最新的开发代码\r\n  - 接受新功能和 Bug 修复的 Pull Request\r\n  - 定期合并到 main 分支用于发布新版本\r\n\r\n### 5.2 功能分支\r\n\r\n- **feature/xxx**：用于开发新功能\r\n  - 从 develop 分支创建\r\n  - 完成后合并回 develop 分支\r\n  - 命名格式：`feature/feature-name`\r\n\r\n- **bugfix/xxx**：用于修复 Bug\r\n  - 从 develop 分支创建\r\n  - 完成后合并回 develop 分支\r\n  - 命名格式：`bugfix/bugfix-name`\r\n\r\n- **hotfix/xxx**：用于修复生产环境中的紧急 Bug\r\n  - 从 main 分支创建\r\n  - 完成后合并回 main 和 develop 分支\r\n  - 命名格式：`hotfix/hotfix-name`\r\n\r\n- **release/xxx**：用于准备新版本发布\r\n  - 从 develop 分支创建\r\n  - 用于更新版本号和 CHANGELOG\r\n  - 完成后合并回 main 和 develop 分支\r\n  - 命名格式：`release/version-number`\r\n\r\n## 6. 测试规范\r\n\r\n### 6.1 测试类型\r\n\r\n- **单元测试**：测试单个函数或方法\r\n- **集成测试**：测试多个模块之间的交互\r\n- **功能测试**：测试完整的功能流程\r\n- **兼容性测试**：测试插件与不同环境的兼容性\r\n\r\n### 6.2 测试工具\r\n\r\n- **PHPUnit**：用于 PHP 单元测试\r\n- **QUnit**：用于 JavaScript 单元测试\r\n- **WP CLI**：用于 WordPress 集成测试\r\n\r\n### 6.3 测试覆盖率\r\n\r\n- **代码覆盖率**：争取达到 80% 以上的代码覆盖率\r\n- **测试用例**：为每个功能编写测试用例\r\n- **持续集成**：使用 CI 工具自动运行测试\r\n\r\n### 6.4 运行测试\r\n\r\n```bash\r\n# 运行 PHPUnit 测试\r\nvendor/bin/phpunit\r\n\r\n# 运行 QUnit 测试\r\nnpm test\r\n\r\n# 运行 WordPress 集成测试\r\nwp test\r\n```\r\n\r\n## 7. 文档规范\r\n\r\n### 7.1 文档类型\r\n\r\n- **代码注释**：为所有公共函数和类添加注释\r\n- **API 文档**：详细说明插件的 API\r\n- **使用指南**：说明如何使用插件\r\n- **CHANGELOG**：记录版本更新内容\r\n\r\n### 7.2 文档格式\r\n\r\n- **格式**：使用 Markdown 格式\r\n- **编码**：UTF-8 编码，无 BOM\r\n- **换行符**：Unix LF 换行符\r\n- **结构**：保持清晰的文档结构\r\n\r\n### 7.3 文档目录\r\n\r\n```\r\ndocs/\r\n├── 01-文档指南/               # 文档指南\r\n├── 02-项目概述/               # 项目概述\r\n├── 03-使用指南/               # 使用指南\r\n├── 04-功能模块/               # 功能模块\r\n├── 05-技术文档/               # 技术文档\r\n├── 06-开发指南/               # 开发指南\r\n├── 07-测试文档/               # 测试文档\r\n├── 08-部署文档/               # 部署文档\r\n├── 09-运维文档/               # 运维文档\r\n├── 10-工具文档/               # 工具文档\r\n└── 11-附录/                   # 附录\r\n```\r\n\r\n## 8. 国际化\r\n\r\n### 8.1 翻译流程\r\n\r\n1. **更新 POT 文件**：在 `languages/` 目录中更新 `wp-clean-admin.pot` 文件\r\n2. **创建翻译文件**：使用 Poedit 或其他工具创建 `.po` 翻译文件\r\n3. **翻译内容**：翻译所有可翻译字符串\r\n4. **生成 MO 文件**：生成 `.mo` 二进制文件\r\n5. **提交翻译**：将翻译文件提交到 GitHub\r\n\r\n### 8.2 翻译规范\r\n\r\n- **文本域**：使用 `WPCA_TEXT_DOMAIN` 常量\r\n- **翻译函数**：使用 `__()`, `_e()`, `_x()`, `_ex()` 等翻译函数\r\n- **避免硬编码**：避免在代码中硬编码文本\r\n- **上下文**：为翻译添加适当的上下文\r\n- **测试翻译**：确保翻译在 WordPress 中正常显示\r\n\r\n## 9. Bug 报告\r\n\r\n### 9.1 报告流程\r\n\r\n1. **搜索 Issues**：首先搜索现有的 Issues，确认问题是否已经被报告\r\n2. **创建 Issue**：如果问题未被报告，创建一个新的 Issue\r\n3. **描述问题**：详细描述问题，包括：\r\n   - 问题的具体表现\r\n   - WordPress 版本和 PHP 版本\r\n   - 复现步骤\r\n   - 预期行为\r\n   - 实际行为\r\n   - 相关截图（如果适用）\r\n\r\n### 9.2 Bug 标签\r\n\r\n- **bug**：确认的 Bug\r\n- **enhancement**：功能增强\r\n- **documentation**：文档相关\r\n- **question**：问题或疑问\r\n- **help wanted**：需要帮助\r\n- **good first issue**：适合新贡献者的问题\r\n\r\n## 10. 功能请求\r\n\r\n### 10.1 请求流程\r\n\r\n1. **搜索 Issues**：首先搜索现有的 Issues，确认功能是否已经被请求\r\n2. **创建 Issue**：如果功能未被请求，创建一个新的 Issue\r\n3. **描述功能**：详细描述您希望添加的功能，包括：\r\n   - 功能的用途和价值\r\n   - 功能的具体实现思路\r\n   - 预期的用户体验\r\n   - 相关示例或参考（如果有）\r\n   - 实现该功能的优先级\r\n\r\n### 10.2 功能标签\r\n\r\n功能请求使用以下标签：\r\n- **feature**：新功能请求\r\n- **enhancement**：现有功能的增强\r\n- **priority**：功能的优先级\r\n- **help wanted**：需要帮助实现\r\n- **discussion**：需要讨论的功能\r\n\r\n## 11. 开发环境设置\r\n\r\n### 11.1 系统要求\r\n\r\n- **操作系统**：Windows, macOS, Linux\r\n- **PHP**：7.0+（推荐 7.4+）\r\n- **WordPress**：5.0+（推荐 6.0+）\r\n- **MySQL**：5.6+（推荐 5.7+）\r\n- **Git**：版本控制工具\r\n\r\n### 11.2 本地开发环境\r\n\r\n您可以使用以下工具搭建本地开发环境：\r\n\r\n- **XAMPP**：适用于 Windows, macOS, Linux\r\n- **MAMP**：适用于 macOS, Windows\r\n- **WAMP**：适用于 Windows\r\n- **Docker**：容器化开发环境\r\n- **VVV (Varying Vagrant Vagrants)**：专为 WordPress 开发设计\r\n\r\n### 11.3 设置步骤\r\n\r\n1. **安装本地环境**：安装并配置 XAMPP, MAMP, WAMP 或其他本地环境\r\n2. **安装 WordPress**：在本地环境中安装 WordPress\r\n3. **克隆仓库**：将插件仓库克隆到 WordPress 插件目录\r\n   ```bash\r\n   cd /path/to/wordpress/wp-content/plugins/\r\n   git clone https://github.com/your-username/WPCleanAdmin.git wpcleanadmin\r\n   ```\r\n4. **激活插件**：在 WordPress 后台激活插件\r\n5. **开始开发**：开始开发和测试插件\r\n\r\n## 12. 代码审查\r\n\r\n### 12.1 审查流程\r\n\r\n代码审查是确保代码质量的重要环节，所有代码变更都需要经过审查：\r\n\r\n- **自我审查**：在提交 Pull Request 前，先自行审查代码\r\n- **团队审查**：由项目维护者或其他贡献者审查代码\r\n- **反馈**：审查者提供反馈和建议\r\n- **修改**：根据反馈修改代码\r\n- **合并**：审查通过后，合并代码\r\n\r\n### 12.2 审查要点\r\n\r\n审查时主要关注以下方面：\r\n\r\n1. **功能完整性**：代码是否实现了预期功能\r\n2. **代码质量**：代码是否清晰、可维护\r\n3. **安全性**：代码是否存在安全问题\r\n4. **性能**：代码是否影响性能\r\n5. **兼容性**：代码是否兼容不同环境\r\n6. **测试**：代码是否有适当的测试\r\n7. **文档**：代码是否有适当的文档\r\n\r\n## 13. 版本发布\r\n\r\n### 13.1 版本号格式\r\n\r\n项目使用语义化版本号（SemVer），格式为 MAJOR.MINOR.PATCH\r\n\r\n- **MAJOR**：不兼容的 API 变更\r\n- **MINOR**：向后兼容的新功能\r\n- **PATCH**：向后兼容的 Bug 修复\r\n\r\n### 13.2 发布流程\r\n\r\n1. **创建发布分支**：从 develop 分支创建 release 分支\r\n   ```bash\r\n   git checkout develop\r\n   git pull upstream develop\r\n   git checkout -b release/1.7.16\r\n   ```\r\n\r\n2. **更新版本号**：更新插件中的版本号\r\n   - `wpcleanadmin/wp-clean-admin.php`：插件主文件中的版本号\r\n   - `wpcleanadmin/includes/wpca-core-functions.php`：核心函数中的版本号\r\n\r\n3. **更新 CHANGELOG**：更新 CHANGELOG.md 文件，添加新版本的更新内容\r\n\r\n4. **运行测试**：确保所有测试通过\r\n\r\n5. **提交更改**：提交版本号和 CHANGELOG 的更改\r\n   ```bash\r\n   git add .\r\n   git commit -m "chore: 准备发布版本 1.7.16"\r\n   ```\r\n\r\n6. **合并到 main**：将 release 分支合并到 main 分支\r\n   ```bash\r\n   git checkout main\r\n   git merge release/1.7.16\r\n   git push upstream main\r\n   ```\r\n\r\n7. **创建标签**：为新版本创建 Git 标签\r\n   ```bash\r\n   git tag v1.7.16\r\n   git push upstream v1.7.16\r\n   ```\r\n\r\n8. **合并到 develop**：将 release 分支合并到 develop 分支\r\n   ```bash\r\n   git checkout develop\r\n   git merge release/1.7.16\r\n   git push upstream develop\r\n   ```\r\n\r\n9. **删除发布分支**：删除临时的 release 分支\r\n   ```bash\r\n   git branch -d release/1.7.16\r\n   ```\r\n\r\n10. **发布到 WordPress.org**：将新版本发布到 WordPress.org 插件目录\r\n\r\n## 14. 常见问题\r\n\r\n### 14.1 如何获取帮助\r\n\r\n如果您在开发过程中遇到问题，可以通过以下方式获取帮助：\r\n\r\n- **GitHub Issues**：提交问题或疑问\r\n- **GitHub Discussions**：参与讨论\r\n- **WordPress Slack**：加入 WordPress 社区 Slack 频道\r\n- **文档**：查阅项目文档\r\n- **代码示例**：参考现有代码示例\r\n\r\n## 15. 许可证\r\n\r\nWP Clean Admin 使用 GPL-2.0+ 许可证，详情请查看 [LICENSE](https://github.com/sutchan/WPCleanAdmin/blob/main/LICENSE) 文件。\r\n\r\n## 16. 致谢\r\n\r\n感谢所有为 WP Clean Admin 插件做出贡献的开发者和用户！您的贡献对项目的成功至关重要。\r\n\r\n通过遵循本指南，您可以确保您的贡献符合项目的要求，从而更快地被合并和发布。如果您有任何疑问或建议，请随时通过 GitHub Issues 或 Discussions 提出。\r\n\r\n祝您开发愉快！