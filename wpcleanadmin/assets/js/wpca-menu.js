/**\r\n * WP Clean Admin Menu JavaScript\r\n *\r\n * @package WPCA\r\n * @version 1.7.15\r\n * @author Sut\r\n * @author URI: https://github.com/sutchan\r\n * @since 1.7.15\r\n */\r\n// Use IIFE to encapsulate the menu functionality\r\n(function($) {\r\n    'use strict';\r\n    \r\n    /**\r\n     * Menu functionality for WPCA\r\n     */\r\n    const WPCAMenu = {\r\n        /**\r\n         * Initialize menu functionality\r\n         */\r\n        init: function() {\r\n            this.bindEvents();\r\n            this.initMenuItems();\r\n        },\r\n        \r\n        /**\r\n         * Bind events for menu\r\n         */\r\n        bindEvents: function() {\r\n            // Handle menu item toggles\r\n            $(document).on('click', '.wpca-menu-toggle', this.handleMenuToggle.bind(this));\r\n            \r\n            // Handle menu item reordering\r\n            $(document).on('click', '.wpca-menu-reorder-btn', this.handleMenuReorder.bind(this));\r\n            \r\n            // Handle menu item deletion\r\n            $(document).on('click', '.wpca-menu-delete-btn', this.handleMenuDelete.bind(this));\r\n        },\r\n        \r\n        /**\r\n         * Initialize menu items\r\n         */\r\n        initMenuItems: function() {\r\n            // Add visual indicators for menu item states\r\n            $('.wpca-menu-item').each(function() {\r\n                const $item = $(this);\r\n                WPCAMenu.updateMenuItemVisuals($item);\r\n            });\r\n        },\r\n        \r\n        /**\r\n         * Handle menu item toggles\r\n         * @param {Event} e - The click event\r\n         */\r\n        handleMenuToggle: function(e) {\r\n            e.preventDefault();\r\n            \r\n            const $toggle = $(e.currentTarget);\r\n            const $menuItem = $toggle.closest('.wpca-menu-item');\r\n            const isActive = $menuItem.hasClass('active');\r\n            \r\n            if (isActive) {\r\n                $menuItem.removeClass('active');\r\n            } else {\r\n                $menuItem.addClass('active');\r\n            }\r\n            \r\n            // Update visual feedback\r\n            this.updateMenuItemVisuals($menuItem);\r\n        },\r\n        \r\n        /**\r\n         * Handle menu item reordering\r\n         * @param {Event} e - The click event\r\n         */\r\n        handleMenuReorder: function(e) {\r\n            e.preventDefault();\r\n            \r\n            const $btn = $(e.currentTarget);\r\n            const direction = $btn.data('direction') || 'up';\r\n            const $menuItem = $btn.closest('.wpca-menu-item');\r\n            const $menuList = $menuItem.closest('.wpca-menu-list');\r\n            \r\n            // Trigger custom event for menu reordering\r\n            $(document).trigger('wpca_menu_reorder', { \r\n                menuItem: $menuItem, \r\n                direction: direction, \r\n                menuList: $menuList \r\n            });\r\n        },\r\n        \r\n        /**\r\n         * Handle menu item deletion\r\n         * @param {Event} e - The click event\r\n         */\r\n        handleMenuDelete: function(e) {\r\n            e.preventDefault();\r\n            \r\n            const $btn = $(e.currentTarget);\r\n            const $menuItem = $btn.closest('.wpca-menu-item');\r\n            const menuItemName = $menuItem.data('menu-item-name') || 'this menu item';\r\n            const confirmText = $btn.data('confirm') || `Are you sure you want to delete ${menuItemName}?`;\r\n            \r\n            if (confirm(confirmText)) {\r\n                // Trigger custom event for menu item deletion\r\n                $(document).trigger('wpca_menu_delete', { menuItem: $menuItem });\r\n            }\r\n        },\r\n        \r\n        /**\r\n         * Update visual feedback for menu items\r\n         * @param {jQuery} $menuItem - The menu item element\r\n         */\r\n        updateMenuItemVisuals: function($menuItem) {\r\n            const isActive = $menuItem.hasClass('active');\r\n            const $toggle = $menuItem.find('.wpca-menu-toggle');\r\n            \r\n            if (isActive) {\r\n                $toggle.text('Disable');\r\n                $menuItem.addClass('wpca-menu-item-active');\r\n            } else {\r\n                $toggle.text('Enable');\r\n                $menuItem.removeClass('wpca-menu-item-active');\r\n            }\r\n        }\r\n    };\r\n    \r\n    // Initialize menu functionality when DOM is ready\r\n    $(document).ready(function() {\r\n        WPCAMenu.init();\r\n    });\r\n    \r\n    // Expose to global scope for potential external use\r\n    window.WPCAMenu = WPCAMenu;\r\n})(jQuery);\r\n