/**\r\n * WP Clean Admin Performance JavaScript\r\n *\r\n * @package WPCA\r\n * @version 1.8.0\r\n * @author Sut\r\n * @author URI: https://github.com/sutchan\r\n * @since 1.7.15\r\n */\r\n// Use IIFE to encapsulate the performance functionality\r\n(function($) {\r\n    'use strict';\r\n    \r\n    /**\r\n     * Performance functionality for WPCA\r\n     */\r\n    const WPCAPerformance = {\r\n        /**\r\n         * Initialize performance functionality\r\n         */\r\n        init: function() {\r\n            this.bindEvents();\r\n            this.initPerformanceMetrics();\r\n        },\r\n        \r\n        /**\r\n         * Bind events for performance\r\n         */\r\n        bindEvents: function() {\r\n            // Handle performance optimization buttons\r\n            $(document).on('click', '.wpca-optimize-btn', this.handleOptimize.bind(this));\r\n            \r\n            // Handle performance metric updates\r\n            $(document).on('click', '.wpca-refresh-metrics-btn', this.handleRefreshMetrics.bind(this));\r\n        },\r\n        \r\n        /**\r\n         * Initialize performance metrics display\r\n         */\r\n        initPerformanceMetrics: function() {\r\n            // Add loading indicators for metrics\r\n            $('.wpca-metrics-container').each(function() {\r\n                const $container = $(this);\r\n                $container.append('<div class="wpca-metrics-loading" style="display: none;">Loading metrics...</div>');\r\n            });\r\n        },\r\n        \r\n        /**\r\n         * Handle optimization button clicks\r\n         * @param {Event} e - The click event\r\n         */\r\n        handleOptimize: function(e) {\r\n            e.preventDefault();\r\n            \r\n            const $btn = $(e.currentTarget);\r\n            const optimizationType = $btn.data('optimize-type') || 'general';\r\n            const confirmText = $btn.data('confirm') || `Are you sure you want to perform ${optimizationType} optimization?`;\r\n            \r\n            if (confirm(confirmText)) {\r\n                this.performOptimization($btn, optimizationType);\r\n            }\r\n        },\r\n        \r\n        /**\r\n         * Handle metrics refresh button clicks\r\n         * @param {Event} e - The click event\r\n         */\r\n        handleRefreshMetrics: function(e) {\r\n            e.preventDefault();\r\n            \r\n            const $btn = $(e.currentTarget);\r\n            this.refreshMetrics($btn);\r\n        },\r\n        \r\n        /**\r\n         * Perform optimization\r\n         * @param {jQuery} $btn - The optimization button\r\n         * @param {string} type - The optimization type\r\n         */\r\n        performOptimization: function($btn, type) {\r\n            const originalText = $btn.text();\r\n            const optimizingText = $btn.data('optimizing-text') || 'Optimizing...';\r\n            \r\n            // Add loading state\r\n            $btn.prop('disabled', true).text(optimizingText);\r\n            \r\n            // Trigger custom event for optimization\r\n            $(document).trigger('wpca_optimization_started', { \r\n                type: type, \r\n                button: $btn \r\n            });\r\n        },\r\n        \r\n        /**\r\n         * Refresh performance metrics\r\n         * @param {jQuery} $btn - The refresh button\r\n         */\r\n        refreshMetrics: function($btn) {\r\n            const originalText = $btn.text();\r\n            const refreshingText = $btn.data('refreshing-text') || 'Refreshing...';\r\n            const $metricsContainer = $btn.closest('.wpca-metrics-container');\r\n            const $loadingIndicator = $metricsContainer.find('.wpca-metrics-loading');\r\n            \r\n            // Add loading states\r\n            $btn.prop('disabled', true).text(refreshingText);\r\n            $loadingIndicator.show();\r\n            \r\n            // Trigger custom event for metrics refresh\r\n            $(document).trigger('wpca_metrics_refreshing', { \r\n                container: $metricsContainer, \r\n                button: $btn \r\n            });\r\n        }\r\n    };\r\n    \r\n    // Initialize performance functionality when DOM is ready\r\n    $(document).ready(function() {\r\n        WPCAPerformance.init();\r\n    });\r\n    \r\n    // Expose to global scope for potential external use\r\n    window.WPCAPerformance = WPCAPerformance;\r\n})(jQuery);\r\n
