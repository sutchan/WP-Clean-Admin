/**\r\n * WP Clean Admin Permissions JavaScript\r\n *\r\n * @package WPCA\r\n * @version 1.7.15\r\n * @author Sut\r\n * @author URI: https://github.com/sutchan\r\n * @since 1.7.15\r\n */\r\n// Use IIFE to encapsulate the permissions functionality\r\n(function($) {\r\n    'use strict';\r\n    \r\n    /**\r\n     * Permissions functionality for WPCA\r\n     */\r\n    const WPCAPermissions = {\r\n        /**\r\n         * Initialize permissions functionality\r\n         */\r\n        init: function() {\r\n            this.bindEvents();\r\n            this.initPermissionCheckboxes();\r\n        },\r\n        \r\n        /**\r\n         * Bind events for permissions\r\n         */\r\n        bindEvents: function() {\r\n            // Handle permission checkbox changes\r\n            $(document).on('change', '.wpca-permission-checkbox', this.handlePermissionChange.bind(this));\r\n            \r\n            // Handle role selection changes\r\n            $(document).on('change', '.wpca-role-select', this.handleRoleChange.bind(this));\r\n        },\r\n        \r\n        /**\r\n         * Initialize permission checkboxes\r\n         */\r\n        initPermissionCheckboxes: function() {\r\n            // Add visual feedback for permission states\r\n            $('.wpca-permission-checkbox').each(function() {\r\n                const $checkbox = $(this);\r\n                WPCAPermissions.updatePermissionVisuals($checkbox);\r\n            });\r\n        },\r\n        \r\n        /**\r\n         * Handle permission checkbox changes\r\n         * @param {Event} e - The change event\r\n         */\r\n        handlePermissionChange: function(e) {\r\n            const $checkbox = $(e.currentTarget);\r\n            this.updatePermissionVisuals($checkbox);\r\n        },\r\n        \r\n        /**\r\n         * Handle role selection changes\r\n         * @param {Event} e - The change event\r\n         */\r\n        handleRoleChange: function(e) {\r\n            const $select = $(e.currentTarget);\r\n            const roleId = $select.val();\r\n            const $permissionContainer = $select.closest('.wpca-permissions-container');\r\n            \r\n            // Trigger custom event for role change\r\n            $(document).trigger('wpca_role_changed', { \r\n                roleId: roleId, \r\n                permissionContainer: $permissionContainer \r\n            });\r\n        },\r\n        \r\n        /**\r\n         * Update visual feedback for permission checkboxes\r\n         * @param {jQuery} $checkbox - The checkbox element\r\n         */\r\n        updatePermissionVisuals: function($checkbox) {\r\n            const $container = $checkbox.closest('.wpca-permission-item');\r\n            \r\n            if ($checkbox.is(':checked')) {\r\n                $container.addClass('wpca-permission-enabled');\r\n                $container.removeClass('wpca-permission-disabled');\r\n            } else {\r\n                $container.addClass('wpca-permission-disabled');\r\n                $container.removeClass('wpca-permission-enabled');\r\n            }\r\n        }\r\n    };\r\n    \r\n    // Initialize permissions functionality when DOM is ready\r\n    $(document).ready(function() {\r\n        WPCAPermissions.init();\r\n    });\r\n    \r\n    // Expose to global scope for potential external use\r\n    window.WPCAPermissions = WPCAPermissions;\r\n})(jQuery);\r\n